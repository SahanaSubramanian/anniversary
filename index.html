<!DOCTYPE html>
<html>
<head>
  <title>❤️</title>
  <style>
    body {
      font-family: "Courier New", monospace;
      background-color: #000;
      color: #fff;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: flex-start;
      padding: 20px;
      font-size: 32px;
      text-align: left;
      overflow: auto;
      transition: background-color 0.5s ease;
      position: relative;
    }

    .line { display: block; }
    .cursor { display: inline-block; width: 10px; background: #fff; margin-left:2px; animation: blink 1s step-start infinite; }
    @keyframes blink { 50% { background: transparent; } }

    #preGalleryMessage { display: none; font-size:36px; color:#fff; margin-top:20px; }

    .gallery {
      display:none;
      width:100%;
      column-count:4;
      column-gap:20px;
      margin-top:20px;
    }
    .gallery img { width:100%; height:auto; margin-bottom:20px; border:3px solid #fff; border-radius:10px; cursor:pointer; }

    #nextBtn, #timelineNextBtn, #backBtn {
      display:none;
      position: fixed;
      top: 20px;
      padding: 10px 20px;
      font-size: 24px;
      color: #fff;
      border:none;
      border-radius:10px;
      cursor:pointer;
      z-index: 100;
    }

    #nextBtn, #timelineNextBtn { right:20px; background:#ff69b4; }
    #backBtn { left:20px; background:#444; }

    @media (max-width:1200px){ .gallery { column-count:3; } }
    @media (max-width:800px){ .gallery { column-count:2; } }
    @media (max-width:500px){ .gallery { column-count:1; } }

    #modal { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.8); justify-content:center; align-items:center; z-index:1000; }
    #modal img { max-width:90%; max-height:90%; border:5px solid #fff; border-radius:10px; }

    #hiPage { display:none; margin-top:20px; font-size:48px; }

    #popupText {
      display:none;
      position:fixed;
      bottom:30px; left:30px;
      background:hotpink;
      color:white;
      border:2px solid white;
      padding:15px 20px;
      font-size:20px;
      z-index:1010;
    }

    /* Timeline page */
    #timelinePage { display:none; margin-top:20px; }
    #timelinePage h2 { font-size:36px; }
    #timelineContainer img { width:200px; border:3px solid white; border-radius:10px; cursor:pointer; margin-bottom:10px; }
  </style>
</head>

<body>

  <!-- Terminal typing first page -->
  <div id="line1" class="line">&gt; </div><span class="cursor"></span>
  <div id="lineEllipsis1" class="line">&gt; </div>
  <div id="line2" class="line">&gt; </div>
  <div id="lineEllipsis2" class="line">&gt; </div>
  <div id="line3" class="line">&gt; </div>

  <div id="preGalleryMessage">&gt; </div>

  <button id="nextBtn">Next</button>
  <button id="timelineNextBtn">Next</button>
  <button id="backBtn">Back</button>

  <!-- Galleries & pages -->
  <div id="gallery1" class="gallery"></div>
  <div id="hiPage">&gt; <span id="hiText"></span><span class="cursor"></span></div>
  <div id="timelinePage">
    <h2>&gt; Our journey together</h2>
    <div id="timelineContainer"></div>
  </div>
  <div id="gallery2" class="gallery"></div>

  <!-- Modal -->
  <div id="modal"><img id="modalImg"></div>

  <!-- Popup messages -->
  <div id="popupText">&gt; <span id="popupMessage"></span><span class="cursor"></span></div>

  <script>
    const speed = 100;

    const firstMessage = "hi aarjav!!";
    const secondMessage = "happy anniversary ♥";
    const thirdMessage = "thank you for the best year :)";

    const gallery1Images = [
      "lp_image 5.jpg","lp_image 6.jpg","lp_image.jpg","IMG_6276.jpg",
      "IMG_6274.jpg","IMG_6273.jpg","IMG_6271.jpg","IMG_6269.jpg"
    ];

    const gallery2Images = [
      "IMG_5847.jpg","IMG_4659.jpg","IMG_3867.jpg","IMG_3586.jpg",
      "IMG_3084.jpg","IMG_2167.jpg","IMG_1292.jpg","DSC06549.jpg",
      "5D987C5B-EC47-42A1-A716-EC82306B31A4 (1).jpg"
    ];

    const timelineImages = ["IMG_5847.jpg","IMG_4659.jpg","IMG_3867.jpg"];
    const imageMessages = { "IMG_6273.jpg":"birthday boy (a date fully planned by me btw)" };

    let pageHistory = [];
    let currentPage = null;

    // --- Typing ---
    function typeMessage(elementId,message,callback){
      let index=0;
      function t(){ if(index<message.length){ document.getElementById(elementId).innerHTML+=message[index++]; setTimeout(t,speed);}
      else if(callback) callback();}
      t();
    }
    function typeEllipsis(elementId,callback){
      const ellipsis = "..."; let index=0;
      function t(){ if(index<ellipsis.length){ document.getElementById(elementId).innerHTML+=ellipsis[index++]; setTimeout(t,speed);}
      else if(callback) setTimeout(callback,300);}
      t();
    }

    // --- Page navigation ---
    function navigateToPage(pageFunc,pageName){
      if(currentPage) pageHistory.push(currentPage);
      currentPage = pageName;
      document.getElementById("gallery1").style.display="none";
      document.getElementById("gallery2").style.display="none";
      document.getElementById("hiPage").style.display="none";
      document.getElementById("timelinePage").style.display="none";
      document.getElementById("preGalleryMessage").style.display="none";
      document.getElementById("nextBtn").style.display="none";
      document.getElementById("timelineNextBtn").style.display="none";
      pageFunc();
      document.getElementById("backBtn").style.display = pageHistory.length > 0 ? "block" : "none";
    }

    document.getElementById("backBtn").onclick = ()=>{
      if(pageHistory.length===0) return;
      const lastPage = pageHistory.pop();
      switch(lastPage){
        case "gallery1": navigateToPage(showGallery1,"gallery1"); break;
        case "hiPage": navigateToPage(showHiPage,"hiPage"); break;
        case "timelinePage": navigateToPage(showTimelinePage,"timelinePage"); break;
        case "gallery2": navigateToPage(showGallery2,"gallery2"); break;
      }
    };

    // --- First page typing ---
    function startTyping(){
      typeMessage("line1", firstMessage, ()=>{
        typeEllipsis("lineEllipsis1", ()=>{
          typeMessage("line2", secondMessage, ()=>{
            typeEllipsis("lineEllipsis2", ()=>{
              typeMessage("line3", thirdMessage, ()=>navigateToPage(showSecondPageMessage,"secondPage"));
            });
          });
        });
      });
    }
    window.onload = startTyping;

    function showSecondPageMessage(){
      document.body.style.backgroundColor="#ffb6c1";
      const msgEl = document.getElementById("preGalleryMessage");
      msgEl.innerHTML="&gt; ";
      msgEl.style.display="block";
      const message="my favorite photos (solo shots first)";
      let index=0;
      function typeChar(){ if(index<message.length){ msgEl.innerHTML+=message[index++]; setTimeout(typeChar,speed);}
      else typeEllipsis("preGalleryMessage",()=>navigateToPage(showGallery1,"gallery1"));}
      typeChar();
    }

    function showGallery1(){
      const gallery1=document.getElementById("gallery1");
      gallery1.style.display="block";
      const nextBtn=document.getElementById("nextBtn");
      nextBtn.style.display="block";

      gallery1Images.forEach(filename=>{
        const img=document.createElement("img");
        img.src="images/"+filename; img.alt="Us";
        img.onclick=()=>handleImageClick(filename,img.src);
        gallery1.appendChild(img);
      });

      nextBtn.onclick=()=>navigateToPage(showHiPage,"hiPage");
    }

    function showHiPage(){
      const hiPage=document.getElementById("hiPage");
      hiPage.style.display="block";
      const hiText=document.getElementById("hiText");
      hiText.innerHTML="";
      const message="hi"; let index=0;
      function typeHi(){ if(index<message.length){ hiText.innerHTML+=message[index++]; setTimeout(typeHi,speed);} 
      else navigateToPage(showTimelinePage,"timelinePage");}
      typeHi();
    }

    function showTimelinePage(){
      const timelinePage=document.getElementById("timelinePage");
      timelinePage.style.display="block";
      const container=document.getElementById("timelineContainer");
      if(container.childElementCount===0){
        timelineImages.forEach(filename=>{
          const img=document.createElement("img");
          img.src="images/"+filename;
          img.onclick=()=>handleImageClick(filename,img.src);
          container.appendChild(img);
        });
      }
      document.getElementById("timelineNextBtn").style.display="block";
      document.getElementById("timelineNextBtn").onclick=()=>navigateToPage(showGallery2,"gallery2");
    }

    function showGallery2(){
      const gallery2=document.getElementById("gallery2");
      gallery2.style.display="block";
      if(gallery2.childElementCount===0){
        gallery2Images.forEach(filename=>{
          const img=document.createElement("img");
          img.src="images/"+filename;
          img.alt="Us";
          img.onclick=()=>handleImageClick(filename,img.src);
          gallery2.appendChild(img);
        });
      }
    }

    function handleImageClick(filename,src){
      const modal=document.getElementById("modal");
      const modalImg=document.getElementById("modalImg");
      modalImg.src=src;
      modal.style.display="flex";

      if(imageMessages[filename]) showPopupMessage(imageMessages[filename]);
    }

    function showPopupMessage(text){
      const popup=document.getElementById("popupText");
      const popupMessage=document.getElementById("popupMessage");
      popup.style.display="block";
      popupMessage.innerHTML="";
      let i=0;
      function t(){ if(i<text.length){ popupMessage.innerHTML+=text[i++]; setTimeout(t,60); } }
      t();
      setTimeout(()=>{ popup.style.display="none"; },4000);
    }

    document.getElementById("modal").addEventListener("click",()=>{ document.getElementById("modal").style.display="none"; });

  </script>
</body>
</html>
