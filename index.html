<!DOCTYPE html>
<html>
<head>
  <title>❤️</title>
  <style>
    body {
      font-family: "Courier New", monospace;
      background-color: #000;
      color: #fff;
      padding: 20px;
      font-size: 32px;
      overflow: auto;
      transition: background-color 0.5s ease;
      position: relative;
    }

    .line { display:block; }

    .cursor {
      display:inline-block;
      width:10px;
      background:white;
      margin-left:2px;
      animation: blink 1s step-start infinite;
    }
    @keyframes blink { 50% { background: transparent; } }

    .gallery { display:none; width:100%; column-count:4; column-gap:20px; margin-top:20px; }
    .gallery img { width:100%; height:auto; margin-bottom:20px; border:3px solid #fff; border-radius:10px; cursor:pointer; }

    #nextBtn, #backBtn, #timelineNextBtn {
      display:none;
      position: fixed;
      top: 20px;
      padding:10px 20px;
      font-size:24px;
      border:none;
      border-radius:10px;
      color:white;
      cursor:pointer;
      z-index:100;
    }
    #nextBtn, #timelineNextBtn { right:20px; background:#ff69b4; }
    #backBtn { left:20px; background:#555; }

    #modal {
      display:none;
      position:fixed;
      inset:0;
      background:rgba(255,105,180,0.9); /* hot pink */
      justify-content:center;
      align-items:center;
      z-index:1000;
      color:white;
    }
    #modal img { max-width:90%; max-height:90%; border:5px solid white; border-radius:10px; }

    #popupText {
      display:none;
      position:fixed;
      bottom:30px;
      left:30px;
      background:#ff1493; /* deep pink */
      border:2px solid white;
      padding:15px 20px;
      font-size:20px;
      color:white;
      z-index:1010;
    }

    #preGalleryMessage, #hiPage, #timelinePage { display:none; }
    #hiPage { font-size:48px; margin-top:20px; }
    #timelineContainer img { width:200px; border:3px solid white; border-radius:10px; cursor:pointer; margin-bottom:10px; }
  </style>
</head>
<body>

  <!-- Terminal typing first page -->
  <div id="line1" class="line">&gt; </div><span class="cursor"></span>
  <div id="lineEllipsis1" class="line">&gt; </div>
  <div id="line2" class="line">&gt; </div>
  <div id="lineEllipsis2" class="line">&gt; </div>
  <div id="line3" class="line">&gt; </div>

  <div id="preGalleryMessage">&gt; </div>

  <button id="nextBtn">Next</button>
  <button id="backBtn">Back</button>

  <!-- Gallery 1 -->
  <div id="gallery1" class="gallery"></div>

  <!-- Black hi screen -->
  <div id="hiPage">&gt; <span id="hiText"></span><span class="cursor"></span></div>

  <!-- Timeline page -->
  <div id="timelinePage">
    <h2>&gt; Our journey together</h2>
    <div id="timelineContainer"></div>
    <button id="timelineNextBtn">Next</button>
  </div>

  <!-- Gallery 2 -->
  <div id="gallery2" class="gallery"></div>

  <!-- Modal -->
  <div id="modal"><img id="modalImg"></div>

  <!-- Popup text for image messages -->
  <div id="popupText">&gt; <span id="popupMessage"></span><span class="cursor"></span></div>

<script>
const speed = 100;

// Messages
const firstMessage = "hi aarjav!!";
const secondMessage = "happy anniversary ♥";
const thirdMessage = "thank you for the best year :)";

// Images
const gallery1Images = ["lp_image 5.jpg","lp_image 6.jpg","lp_image.jpg","IMG_6276.jpg","IMG_6274.jpg","IMG_6273.jpg","IMG_6271.jpg","IMG_6269.jpg"];
const gallery2Images = ["IMG_5847.jpg","IMG_4659.jpg","IMG_3867.jpg","IMG_3586.jpg","IMG_3084.jpg","IMG_2167.jpg","IMG_1292.jpg","DSC06549.jpg","5D987C5B-EC47-42A1-A716-EC82306B31A4 (1).jpg"];
const timelineImages = ["IMG_5847.jpg","IMG_4659.jpg","IMG_3867.jpg"];

// Image messages
const imageMessages = { "IMG_6273.jpg": "birthday boy (a date fully planned by me btw)" };

// History stack
let pageHistory = [];
let currentPage = null;

// Typing functions
function typeMessage(elId,msg,cb){
  let i=0;
  function t(){ if(i<msg.length){ document.getElementById(elId).innerHTML+=msg[i++]; setTimeout(t,speed); } else if(cb) cb(); }
  t();
}

function typeEllipsis(elId,cb){
  const ellipsis = "...";
  let i=0;
  function t(){ if(i<ellipsis.length){ document.getElementById(elId).innerHTML+=ellipsis[i++]; setTimeout(t,speed); } else if(cb) setTimeout(cb,300); }
  t();
}

// Navigate to a page
function navigateToPage(func,pageName){
  if(currentPage) pageHistory.push(currentPage);
  currentPage = pageName;
  func();
}

// Back button
backBtn.onclick = ()=>{
  if(pageHistory.length>0){
    const prev = pageHistory.pop();
    currentPage = null; // temporarily
    prevPage(prev);
  }
};

// Show previous page
function prevPage(pageName){
  hideAllPages();
  switch(pageName){
    case "firstTyping": navigateToPage(startTyping,"firstTyping"); break;
    case "secondMessage": navigateToPage(showSecondPageMessage,"secondMessage"); break;
    case "gallery1": navigateToPage(showGallery1,"gallery1"); break;
    case "hiPage": navigateToPage(showHiPage,"hiPage"); break;
    case "timelinePage": navigateToPage(showTimelinePage,"timelinePage"); break;
    case "gallery2": navigateToPage(showGallery2,"gallery2"); break;
  }
}

// Hide all pages
function hideAllPages(){
  document.querySelectorAll('.line, .cursor, #preGalleryMessage, #gallery1, #gallery2, #hiPage, #timelinePage').forEach(el=>el.style.display='none');
  nextBtn.style.display = backBtn.style.display = timelineNextBtn.style.display = false;
}

// --- Start first page typing ---
function startTyping(){
  hideAllPages();
  document.querySelectorAll('.line').forEach(el=>el.innerHTML="");
  line1.style.display=line2.style.display=line3.style.display=lineEllipsis1.style.display=lineEllipsis2.style.display='block';
  document.querySelectorAll('.cursor').forEach(el=>el.style.display='inline-block');
  typeMessage("line1",firstMessage,()=>typeEllipsis("lineEllipsis1",()=>typeMessage("line2",secondMessage,()=>typeEllipsis("lineEllipsis2",()=>typeMessage("line3",thirdMessage,()=>navigateToPage(showSecondPageMessage,"secondMessage"))))));
}

// --- Show second pink message ---
function showSecondPageMessage(){
  hideAllPages();
  document.body.style.backgroundColor="#ffb6c1";
  preGalleryMessage.style.display="block";
  preGalleryMessage.innerHTML="&gt; ";
  let i=0;
  const msg="my favorite photos (solo shots first)";
  function typeChar(){ if(i<msg.length){ preGalleryMessage.innerHTML+=msg[i++]; setTimeout(typeChar,speed); } else typeEllipsis("preGalleryMessage",()=>navigateToPage(showGallery1,"gallery1")); }
  typeChar();
}

// --- Show gallery 1 ---
function showGallery1(){
  hideAllPages();
  gallery1.style.display="block";
  nextBtn.style.display = backBtn.style.display = true;
  gallery1Images.forEach(fn=>{
    const img=document.createElement("img");
    img.src="images/"+fn; img.alt="Us";
    img.onclick=()=>handleImageClick(fn,img.src);
    gallery1.appendChild(img);
  });
  nextBtn.onclick = ()=>navigateToPage(showHiPage,"hiPage");
}

// --- Black hi screen ---
function showHiPage(){
  hideAllPages();
  hiPage.style.display="block";
  backBtn.style.display=true;
  let i=0; const msg="hi"; hiText.innerHTML="";
  function typeHi(){ if(i<msg.length){ hiText.innerHTML+=msg[i++]; setTimeout(typeHi,speed); } else navigateToPage(showTimelinePage,"timelinePage"); }
  typeHi();
}

// --- Timeline ---
function showTimelinePage(){
  hideAllPages();
  timelinePage.style.display="block";
  backBtn.style.display=timelineNextBtn.style.display=true;
  const container=timelineContainer;
  if(container.childElementCount===0){
    timelineImages.forEach(fn=>{
      const img=document.createElement("img");
      img.src="images/"+fn;
      img.onclick=()=>handleImageClick(fn,img.src);
      container.appendChild(img);
    });
  }
  timelineNextBtn.onclick = ()=>navigateToPage(showGallery2,"gallery2");
}

// --- Gallery 2 ---
function showGallery2(){
  hideAllPages();
  gallery2.style.display="block";
  backBtn.style.display=true;
  if(gallery2.childElementCount===0){
    gallery2Images.forEach(fn=>{
      const img=document.createElement("img");
      img.src="images/"+fn;
      img.alt="Us";
      img.onclick=()=>handleImageClick(fn,img.src);
    gallery2.appendChild(img);
    });
  }
}

// --- Image click popup ---
function handleImageClick(fn,src){
  modalImg.src=src;
  modal.style.display="flex";
  if(imageMessages[fn]) showPopupMessage(imageMessages[fn]);
}

// --- Popup typing ---
function showPopupMessage(txt){
  popupText.style.display="block";
  popupMessage.innerHTML="";
  let i=0;
  function t(){ if(i<txt.length){ popupMessage.innerHTML+=txt[i++]; setTimeout(t,60); } }
  t();
  setTimeout(()=>{ popupText.style.display="none"; },4000);
}

// --- Close modal ---
modal.onclick=()=>modal.style.display='none';

// Start
window.onload=()=>navigateToPage(startTyping,"firstTyping");
</script>
</body>
</html>
